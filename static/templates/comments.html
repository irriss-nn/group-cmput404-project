<html>
  <head>
    <title>Document</title>
    <link
      href="{{ url_for('static', path='/css/comments.css') }}"
      rel="stylesheet"
    />
    <link
      href="{{ url_for('static', path='/css/navbar.css') }}"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="navbar">
      <a href="/home">Home</a><br>
      <a href="/current">Current</a><br>
      <a href="/logout">Logout</a><br>
    </div>

    <div id="comment-container">
        <div id="comment-header"></div>
        <div id="comment-box">
              <div class="comment-message">
                <div id='myDiv' class="comment-message-text"></div>
                <div class="comment-message-author"></div>
              </div>
        </div>
      <div id="comment-button">
        <button id="lalaBtn" class="comment-btns" >Previous</button>
        <button id= "myBtn" class="comment-btns">Next</button>
      </div>
    </div>
    <script>
      var click = 1;
      var length = "{{comments.comments|length}}" ;
      var size = "{{comments.size}}";
      console.log("biu1="+((click-1)*size));
      if (length!=0){
        console.log("biu2="+((click-1)*size));
        document.getElementById("myBtn").addEventListener("click", myFunction);
        if((click-1)*size<length){
          function myFunction(){//update function once next is clicked
            click += 1;//page tracker
            let com = {{ comments|tojson }};
            console.log("click="+click);
            console.log("length="+length);
            console.log("biu="+((click-1)*size));
            console.log("size="+size)
            display(click);
          }
        }
       
      }else{
        document.getElementById("comment-box").innerHTML = "No Comment for this post yet";
      }
      function display(page){//begin to display per page
        console.log("{{comments.comments|length}}");
        //let comments = {{ comments|tojson }};
        let com = {{ comments|tojson }};
        console.log(com.comments);
        if (length != 0){
          //frist page 
        document.getElementById("comment-header").innerHTML = "Comment Page "+page;
        document.getElementById("comment-box").innerHTML = "";
        for(i=0;i<=com.size;i++){
          let check = (page-1)*size;
          console.log('check'+check)
          if((check+i) < length){
            document.getElementById("comment-box").innerHTML += "<br></br>"
            document.getElementById("comment-box").innerHTML +=  com.comments[check+i]['comment'];
        }
      }
      }
    }
      window.onload = display(1);
      
        document.getElementById("lalaBtn").addEventListener("click", goBack);
        function goBack() {
          //if statement needed here
          if(click>1){
            click -= 1;
            display(click);
            console.log(click);
          }
      }
    </script>
  </body>
</html>